@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

title [C1] Система мониторинга свиноферм (Вариант 1: Edge-аналитика)

' === Участники ===
Person(operator, "Оператор", "Удаленный мониторинг и настройка системы")
Person(worker, "Дежурный сотрудник", "Получает экстренные уведомления на месте")

System(pig_system, "PigMonitoring System", "Обеспечивает видеоаналитику, контроль кормления и оповещения")

System_Ext(erp, "ERP (1С:Агро)", "Учет поголовья и кормов")
System_Ext(kafka, "Corporate Kafka", "Шина данных для общекорпоративной аналитики")
System_Ext(ai_model, "Partner AI API", "Внешний сервис распознавания образов")
System_Ext(hardware, "Оборудование ферм", "Камеры, кормушки, датчики воды разных производителей")

Rel(operator, pig_system, "Настраивает и мониторит", "Web/Mobile API")
Rel(worker, pig_system, "Получает алерты (в т.ч. локально)", "WebSockets/Local WiFi")

Rel(pig_system, hardware, "Собирает данные и управляет", "MQTT/Modbus/ONVIF")
Rel(pig_system, ai_model, "Загружает модель/обновления", "HTTPS")
Rel(pig_system, erp, "Синхронизация данных", "REST API")
Rel(pig_system, kafka, "Передает метрики", "Kafka Protocol")

@enduml