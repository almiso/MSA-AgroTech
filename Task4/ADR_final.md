### **Название задачи:** MVP системы мониторинга свиноводческих ферм (PigMonitoring). Задание 4: Сравнение и выбор итогового решения.
### **Автор:** Aleksandr Sosorev
### **Дата:** 08.02.2026

### **1. Контекст и постановка задачи**
Для агропромышленного холдинга AgroTech X разрабатывается система мониторинга животных на 150+ распределенных фермах. Основным вызовом является обеспечение безопасности животных в условиях нестабильной связи на объектах и соблюдение жестких лимитов по времени реакции.

### **2. Функциональные требования**
* **Детекция инцидентов:** Автоматическое обнаружение драк и задавливаний поросят с мгновенным оповещением персонала.
* **Автоматизация кормления:** Управление оборудованием (кормушки, поилки) на основе данных телеметрии.
* **Интеграция:** Синхронизация данных с **ERP (1С:Агро)** и отправка метрик в **Corporate Kafka**.

### **3. Нефункциональные требования (NFR)**
* **Latency:** Время реакции на критическое событие не более **5 секунд**.
* **Availability:** Доступность системы на уровне **99,95%**.
* **Offline-first:** Сохранение полной функциональности на ферме при отсутствии внешнего интернет-канала.

### **4. Сравнение вариантов решения**
Был проведен сравнительный анализ целевого (Edge) и альтернативного (Cloud) подходов.

| **Критерий** | **Вариант 1: Edge (Целевое)** | **Вариант 2: Cloud (Альтернатива)**                                                |
| :--- | :--- |:-----------------------------------------------------------------------------------|
| **Гарантия 5 сек** | **Да.** Обработка видео и локальный алерт происходят в периметре фермы. | **Нет.** Время реакции зависит от задержек в интернет-канале.                      |
| **Автономность** | **Высокая.** Система работает без интернета, синхронизируя данные позже. | **Низкая.** При обрыве связи мониторинг на ферме полностью прекращается. |
| **Затраты (CAPEX)** | **Высокие.** Необходима закупка серверов для 150+ локальных точек. | **Низкие.** Используется только централизованная инфраструктура.                   |
| **Затраты (OPEX)** | **Средние.** Низкие расходы на трафик (передаются только метаданные). | **Высокие.** Постоянная оплата стриминга видео 24/7 со всех ферм.         |
| **Безопасность** | **Высокая.** Видеопоток не покидает защищенный периметр фермы. | **Ниже.** Передача чувствительных данных через интернет.                           |

### **5. Итоговое решение и рекомендации**
К реализации рекомендуется **Вариант 1: Edge-аналитика**.

**Обоснование:**
Критическим фактором является соблюдение NFR по скорости реакции (5 сек) и отказоустойчивости при обрыве связи. Только Edge-подход гарантирует выполнение этих условий.
Для реализации выбран стек:
* **Go:** Как основной язык для Edge-компонентов из-за высокой производительности.
* **RabbitMQ:** Как локальный брокер для IoT-датчиков (поддержка MQTT, низкие ресурсы).
* **WebSockets:** Для мгновенной доставки алертов дежурному сотруднику по локальной сети фермы.

### **6. Риски и ограничения**
* **Обслуживание:** Наличие 150+ физических серверов требует выстроенного процесса мониторинга «железа» и логистики замены
* **Сложность обновлений:** Распределенное обновление моделей AI требует внедрения механизмов Canary Deployment.
* **Синхронизация:** Возможны временные задержки обновления данных в центральном DWH (до 10 минут) при проблемах со связью.
* **Синхронизация:** Возможны временные задержки обновления данных в центральном DWH (до 10 минут) при проблемах со связью.